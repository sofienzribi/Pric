<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
	<title><ui:insert name="title"></ui:insert></title>
	<h:outputStylesheet library="css" name="5670482863bb.css" />
	<h:outputStylesheet library="css" name="style.css" />
	<h:outputStylesheet library="css" name="style1.css" />
	<p:growl widgetVar="growl" id="growl" showDetail="true" sticky="true"
		severity="info" />


	<script src="http://maps.google.com/maps/api/js?sensor=false"
		type="text/javascript"></script>
</h:head>
<h:body>

	<ui:include src="/template/Tmphead.xhtml" />
	<h:outputScript library="js" name="bootstrap.min.js"></h:outputScript>



	<div id="body">
		<div class="container">
			<div class="container text-left">

				<div class="text-muted credit"
					style="display: inline-block; padding: 6px;">
					<ui:insert name="leftmenu" />
				</div>
			</div>
			<div class="container text-center">
				<div class="text-muted credit"
					style="display: inline-block; padding: 0px;">
					<ui:insert name="content" />

					<h:form id="Form4">
						<p:growl widgetVar="as" id="as" life="2000"
							severity="info" />
						<p:dialog modal="true" widgetVar="POPSET" id="POPUPSET">
						
							<p:messages id="messagesf" autoUpdate="true" closable="true" />
							<f:facet name="header">Working Measure</f:facet>

							<h:panelGrid columns="1">
								<p:outputLabel>Please enter the password to make this measure the working measure</p:outputLabel>
								<p:password value="#{measure.passwordCheck}" required="true" requiredMessage="Please enter the password"></p:password>
							</h:panelGrid>
							<p:commandButton id="sss" value="Save" icon="ui-icon-check" update=":Form4:as"
								
								actionListener="#{measure.MakeWorkingMeasure()}" />
						</p:dialog>
					</h:form>


					<p:dialog modal="true" widgetVar="POPMeasure" id="POPMeasure">
						<f:facet name="header">Change Measure</f:facet>
						<h:form id="ee">
							<p:dataTable style="width:650px"
								emptyMessage="No Measures found!" value="#{measure.measures}"
								var="prod" rows="5" paginator="true" paginatorPosition="bottom"
								selectionMode="single" selection="#{measure.measure}"
								rowKey="#{prod.id}" widgetVar="prodTab2">
								<p:ajax event="rowSelect" update=":ee"
									listener="#{measure.OnRowSelected()}" />
								<f:facet name="header">Measures</f:facet>
								<p:column headerText="Name">
									<h:outputText value="#{prod.name}" />
								</p:column>
								<p:column headerText="Creation Date">
									<h:outputText value="#{prod.creationDate}" />
								</p:column>
								<p:column headerText="User">
									<h:outputText value="#{measure.GetUserName(prod.userId)}" />
								</p:column>
								<p:column headerText="Active Measure">
									<h:outputText value="#{measure.testactive(prod.active)}" />
								</p:column>
								<p:column headerText="Testing Measure">
									<h:outputText value="#{measure.testactive(prod.activeTest)}" />
								</p:column>
								<f:facet name="footer">
									<p:commandButton value="Set Measure"
										actionListener="#{measure.SetTestMeasure()}"
										rendered="#{measure.displayButtons}" icon="ui-icon-check"
										update=":ee" />
									<p:commandButton value="Reset Measure"
										actionListener="#{measure.ResetMeasure()}"
										icon="ui-icon-refresh" update=":ee " />
								</f:facet>
							</p:dataTable>
						</h:form>
					</p:dialog>
				</div>
			</div>
		</div>
	</div>


	<div id="footer">
		<div class="container ">
			<div class="container text-left">

				<div class="text-muted credit"
					style="display: inline-block; padding: 6px;"></div>
			</div>

			<div class="container text-center">
				<div class="text-muted credit"
					style="display: inline-block; padding: 6px;">
					<ui:insert name="log"></ui:insert>
					<a href="" target="_blank" class=""> <span
						class="inline-hidden-xs inline-hidden-sm"></span>
					</a>
				</div>
			</div>

		</div>
	</div>



	<p:socket onMessage="handleMessage" channel="/NotifyUsers"
		transport="long-polling" />

	<script type="text/javascript">
        function handleMessage(facesmessage) {
            facesmessage.severity='warn';
        PF('growl').show([facesmessage]);
        }
        </script>

</h:body>

</html>